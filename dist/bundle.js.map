{"version":3,"sources":["webpack:///bundle.js","webpack:///./src/index.js","webpack:///./src/stores.js","webpack:///./src/app.html","webpack:///./src/component/postcell.html","webpack:///./src/component/rawhtml.html","webpack:///./src/view/categories-view.html","webpack:///./src/view/detail-view.html","webpack:///./src/view/posts-view.html","webpack:///./src/RiotControl.js","webpack:///./src/riotTags.js","webpack:///./src/stackable.js","webpack:///./src/store/blogstore.js"],"names":["webpackJsonp","module","exports","__webpack_require__","riot","mount","call","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_blogstore","_blogstore2","stores","blog","tag2","opts","_this","this","_currentView","resetData","control","trigger","VE","RESET_DATA","loadView","viewName","id","unmount","data","studyRoute","view","route","on","start","root","innerHTML","content","mixin","_postsInCategories","LOAD_POSTS","onControl","SE","POSTS_CHANGED","posts","reduce","map","post","category","push","update","_stores","_stores2","_posts","readData","_post","getPostById","_total","length","_RiotControlApi","RiotControl","addStore","store","forEach","api","_len","arguments","args","Array","_key","el","apply","signal","func","off","_classCallCheck","instance","Constructor","TypeError","Stackable","token","_token","_apiVersion","_apiUrl","prototype","getContainerItems","containerId","callback","_get","err","res","path","endPoint","$","ajax","url","type","context","document","body","success","response","error","_stackable","_stackable2","BlogStore","observable","stackable","STACK_ID","json","window","localStorage","getItem","LOCALSTORAGE_KEY","JSON","parse","initData","filter","_id","CONTAINER_ID","saveToStorage","setItem","stringify"],"mappings":"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","file":"bundle.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\t__webpack_require__(/*! ./RiotControl.js */ 9);\n\t\n\t__webpack_require__(/*! ./stores.js */ 2);\n\t\n\t__webpack_require__(/*! ./riotTags.js */ 10);\n\t\n\triot.mount('app');\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 1 */,\n/* 2 */\n/*!***********************!*\\\n  !*** ./src/stores.js ***!\n  \\***********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _blogstore = __webpack_require__(/*! ./store/blogstore */ 12);\n\t\n\tvar _blogstore2 = _interopRequireDefault(_blogstore);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar stores = { blog: _blogstore2.default };\n\t\n\texports.default = stores;\n\n/***/ },\n/* 3 */\n/*!**********************!*\\\n  !*** ./src/app.html ***!\n  \\**********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('app', '<section> <header> <nav> <ul> <li><a href=\"#posts\">Posts</a></li> <li><a href=\"#categories\">Categories</a></li> </ul> </nav> </header> <article> <div id=\"mainview\"></div> </article> <footer> <nav> <a onclick=\"{resetData}\">Reset Data</a> </nav> </footer> </section>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this._currentView = null;\n\t\n\t  this.resetData = function () {\n\t    riot.control.trigger(riot.VE.RESET_DATA);\n\t  };\n\t\n\t  this.loadView = function (viewName, id) {\n\t    if (_this._currentView) {\n\t      _this._currentView.unmount(true);\n\t    }\n\t    _this._currentView = riot.mount('div#mainview', viewName, { data: id })[0];\n\t  };\n\t\n\t  this.studyRoute = function (view, id) {\n\t    switch (view) {\n\t      case 'categories':\n\t        _this.loadView('categories-view');\n\t        break;\n\t      case 'detail':\n\t        _this.loadView('detail-view', id);\n\t        break;\n\t      case 'posts':\n\t        _this.loadView('posts-view');\n\t        break;\n\t      default:\n\t        _this.loadView('posts-view');\n\t    }\n\t  };\n\t\n\t  riot.route(this.studyRoute);\n\t\n\t  this.on('mount', function () {\n\t    //reset data on load //todo can be disabled\n\t    riot.control.trigger(riot.VE.RESET_DATA);\n\t    riot.route.start(true);\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 4 */\n/*!*************************************!*\\\n  !*** ./src/component/postcell.html ***!\n  \\*************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('postcell', '<div> <span>Title: <a href=\"#detail/{opts.data._id}\">{opts.data.data.title}</a></span> </div>', '', '', function (opts) {});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 5 */\n/*!************************************!*\\\n  !*** ./src/component/rawhtml.html ***!\n  \\************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('rawhtml', '<span></span>', '', '', function (opts) {\n\t  this.on('updated', function () {\n\t    this.root.innerHTML = opts.content;\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 6 */\n/*!***************************************!*\\\n  !*** ./src/view/categories-view.html ***!\n  \\***************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('categories-view', '<div each=\"{category, posts in _postsInCategories}\"> <h3>{category}</h3> <postcell each=\"{posts}\" data=\"{this}\"></postcell> <hr> </div>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.mixin('controlMixin');\n\t  this._postsInCategories = {};\n\t\n\t  this.on('mount', function () {\n\t    riot.control.trigger(riot.VE.LOAD_POSTS);\n\t  });\n\t\n\t  this.onControl(riot.SE.POSTS_CHANGED, function (posts) {\n\t    _this._postsInCategories = posts.reduce(function (map, post) {\n\t      map[post.category] = map[post.category] || [];\n\t      map[post.category].push(post);\n\t      return map;\n\t    }, {});\n\t    _this.update();\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 7 */\n/*!***********************************!*\\\n  !*** ./src/view/detail-view.html ***!\n  \\***********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tvar _stores = __webpack_require__(/*! ../stores */ 2);\n\t\n\tvar _stores2 = _interopRequireDefault(_stores);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\triot.tag2('detail-view', '<h2>{_post.data.title}</h2> <rawhtml content=\"{_post.data.content}\"></rawhtml> <a if=\"{opts.data > 1}\" href=\"#detail/{opts.data - 1}\">Previous Post</a> | <a if=\"{opts.data < _total}\" href=\"#detail/{opts.data - -1}\">Next Post</a>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.mixin('controlMixin');\n\t\n\t  this.onControl(riot.SE.POSTS_CHANGED, function (_posts) {\n\t    _this.readData();\n\t  });\n\t\n\t  this.readData = function () {\n\t    _this._post = _stores2.default.blog.getPostById(opts.data);\n\t    _this._total = _stores2.default.blog._posts.length;\n\t    _this.update();\n\t  };\n\t\n\t  this.readData();\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 8 */\n/*!**********************************!*\\\n  !*** ./src/view/posts-view.html ***!\n  \\**********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\triot.tag2('posts-view', '<postcell each=\"{_posts}\" data=\"{this}\"></postcell>', '', '', function (opts) {\n\t  var _this = this;\n\t\n\t  this.mixin('controlMixin');\n\t  this._posts = [];\n\t\n\t  this.on('mount', function () {\n\t    riot.control.trigger(riot.VE.LOAD_POSTS);\n\t  });\n\t\n\t  this.onControl(riot.SE.POSTS_CHANGED, function (posts) {\n\t    _this._posts = posts;\n\t    _this.update();\n\t  });\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 9 */\n/*!****************************!*\\\n  !*** ./src/RiotControl.js ***!\n  \\****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\t/* global riot */\n\tvar _RiotControlApi = ['on', 'one', 'off', 'trigger'];\n\tvar RiotControl = {\n\t  _stores: [],\n\t  addStore: function addStore(store) {\n\t    this._stores.push(store);\n\t  }\n\t};\n\t_RiotControlApi.forEach(function (api) {\n\t  RiotControl[api] = function apiHandler() {\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    this._stores.forEach(function (el) {\n\t      return el[api].apply(null, args);\n\t    });\n\t  };\n\t});\n\t\n\t// since riot is auto loaded by ProvidePlugin, merge the control into the riot object\n\triot.control = RiotControl;\n\t// store events\n\triot.SE = {\n\t  POSTS_CHANGED: 'se_posts_changed'\n\t};\n\t// view events\n\triot.VE = {\n\t  RESET_DATA: 've_reset_data',\n\t  LOAD_POSTS: 've_load_posts'\n\t};\n\t\n\t// register global tag mixin for using RiotControl\n\triot.mixin('controlMixin', {\n\t  onControl: function onControl(signal, func) {\n\t    riot.control.on(signal, func);\n\t    this.on('unmount', function () {\n\t      return riot.control.off(signal, func);\n\t    });\n\t  }\n\t});\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ },\n/* 10 */\n/*!*************************!*\\\n  !*** ./src/riotTags.js ***!\n  \\*************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(/*! ./component/postcell.html */ 4);\n\t\n\t__webpack_require__(/*! ./component/rawhtml.html */ 5);\n\t\n\t__webpack_require__(/*! ./view/posts-view.html */ 8);\n\t\n\t__webpack_require__(/*! ./view/categories-view.html */ 6);\n\t\n\t__webpack_require__(/*! ./view/detail-view.html */ 7);\n\t\n\t__webpack_require__(/*! ./app.html */ 3);\n\n/***/ },\n/* 11 */\n/*!**************************!*\\\n  !*** ./src/stackable.js ***!\n  \\**************************/\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Stackable = function () {\n\t  function Stackable(token) {\n\t    _classCallCheck(this, Stackable);\n\t\n\t    this._token = token;\n\t    this._apiVersion = 'v1';\n\t    this._apiUrl = 'https://api.stackable.space';\n\t  }\n\t\n\t  Stackable.prototype.getContainerItems = function getContainerItems(containerId, callback) {\n\t    this._get('containers/' + containerId + '/items', function (err, res) {\n\t      callback(err, res);\n\t    });\n\t  };\n\t\n\t  Stackable.prototype._get = function _get(path, callback) {\n\t    var endPoint = this._apiUrl + '/' + this._apiVersion + '/' + path + '?token=' + this._token;\n\t\n\t    $.ajax({\n\t      url: endPoint,\n\t      type: 'GET',\n\t      context: document.body,\n\t      success: function success(response) {\n\t        callback(false, response);\n\t      },\n\t      error: function error(err) {\n\t        callback(err, false);\n\t      }\n\t    });\n\t  };\n\t\n\t  return Stackable;\n\t}();\n\t\n\texports.default = Stackable;\n\n/***/ },\n/* 12 */\n/*!********************************!*\\\n  !*** ./src/store/blogstore.js ***!\n  \\********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(riot) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _stackable = __webpack_require__(/*! ../stackable.js */ 11);\n\t\n\tvar _stackable2 = _interopRequireDefault(_stackable);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar BlogStore = function () {\n\t  function BlogStore() {\n\t    _classCallCheck(this, BlogStore);\n\t\n\t    riot.observable(this);\n\t\n\t    this.stackable = new _stackable2.default(STACK_ID);\n\t\n\t    //this.initData()\n\t    //todo use local storage later on\n\t    var json = window.localStorage.getItem(LOCALSTORAGE_KEY);\n\t    if (!json) {\n\t      this.initData();\n\t    } else {\n\t      this._posts = json && JSON.parse(json) || [];\n\t    }\n\t  }\n\t\n\t  BlogStore.prototype.getPostById = function getPostById(id) {\n\t    return this._posts.filter(function (post) {\n\t      return post._id === id;\n\t    })[0];\n\t  };\n\t\n\t  BlogStore.prototype.initData = function initData() {\n\t    var _this = this;\n\t\n\t    this.stackable.getContainerItems(CONTAINER_ID, function (err, res) {\n\t      //console.log('stackable data', res);\n\t      _this._posts = res.data;\n\t      _this.saveToStorage();\n\t      _this.trigger(riot.SE.POSTS_CHANGED, _this._posts);\n\t    });\n\t  };\n\t\n\t  BlogStore.prototype.saveToStorage = function saveToStorage() {\n\t    window.localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(this._posts));\n\t  };\n\t\n\t  return BlogStore;\n\t}();\n\t\n\tvar instance = new BlogStore();\n\t\n\tinstance.on(riot.VE.LOAD_POSTS, function () {\n\t  instance.trigger(riot.SE.POSTS_CHANGED, instance._posts);\n\t});\n\t\n\tinstance.on(riot.VE.RESET_DATA, function () {\n\t  instance.initData();\n\t  instance.trigger(riot.SE.POSTS_CHANGED, instance._posts);\n\t});\n\t\n\t// register to riot control by myself\n\triot.control.addStore(instance);\n\texports.default = instance;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! riot */ 1)))\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** bundle.js\n **/","import './RiotControl.js'\nimport './stores.js'\nimport './riotTags.js'\n\nriot.mount('app')\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import blog from './store/blogstore'\n\nconst stores = { blog }\n\nexport default stores\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/stores.js\n **/","riot.tag2('app', '<section> <header> <nav> <ul> <li><a href=\"#posts\">Posts</a></li> <li><a href=\"#categories\">Categories</a></li> </ul> </nav> </header> <article> <div id=\"mainview\"></div> </article> <footer> <nav> <a onclick=\"{resetData}\">Reset Data</a> </nav> </footer> </section>', '', '', function(opts) {\n  this._currentView = null\n\n  this.resetData = () => {\n    riot.control.trigger(riot.VE.RESET_DATA)\n  }\n\n  this.loadView = (viewName, id) => {\n    if (this._currentView) {\n      this._currentView.unmount(true)\n    }\n    this._currentView = riot.mount('div#mainview', viewName, { data: id })[0]\n  }\n\n  this.studyRoute = (view, id) => {\n    switch (view) {\n      case 'categories':\n        this.loadView('categories-view')\n        break\n      case 'detail':\n        this.loadView('detail-view', id)\n        break\n      case 'posts':\n        this.loadView('posts-view')\n        break\n      default:\n        this.loadView('posts-view')\n    }\n  }\n\n  riot.route(this.studyRoute)\n\n  this.on('mount', () => {\n    //reset data on load //todo can be disabled\n    riot.control.trigger(riot.VE.RESET_DATA)\n    riot.route.start(true)\n  })\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app.html\n **/","riot.tag2('postcell', '<div> <span>Title: <a href=\"#detail/{opts.data._id}\">{opts.data.data.title}</a></span> </div>', '', '', function(opts) {\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/component/postcell.html\n **/","riot.tag2('rawhtml', '<span></span>', '', '', function(opts) {\n    this.on('updated', function() {\n      this.root.innerHTML = opts.content;\n    })\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/component/rawhtml.html\n **/","riot.tag2('categories-view', '<div each=\"{category, posts in _postsInCategories}\"> <h3>{category}</h3> <postcell each=\"{posts}\" data=\"{this}\"></postcell> <hr> </div>', '', '', function(opts) {\n  this.mixin('controlMixin')\n  this._postsInCategories = {}\n\n  this.on('mount', () => {\n    riot.control.trigger(riot.VE.LOAD_POSTS)\n  })\n\n  this.onControl(riot.SE.POSTS_CHANGED, posts => {\n    this._postsInCategories = posts.reduce((map, post) => {\n      map[post.category] = map[post.category] || []\n      map[post.category].push(post)\n      return map\n    }, {})\n    this.update()\n  })\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/categories-view.html\n **/","import stores from '../stores'\nriot.tag2('detail-view', '<h2>{_post.data.title}</h2> <rawhtml content=\"{_post.data.content}\"></rawhtml> <a if=\"{opts.data > 1}\" href=\"#detail/{opts.data - 1}\">Previous Post</a> | <a if=\"{opts.data < _total}\" href=\"#detail/{opts.data - -1}\">Next Post</a>', '', '', function(opts) {\n  this.mixin('controlMixin')\n\n  this.onControl(riot.SE.POSTS_CHANGED, _posts => {\n    this.readData()\n  })\n\n  this.readData = () => {\n    this._post = stores.blog.getPostById(opts.data)\n    this._total = stores.blog._posts.length\n    this.update()\n  }\n\n  this.readData()\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/detail-view.html\n **/","riot.tag2('posts-view', '<postcell each=\"{_posts}\" data=\"{this}\"></postcell>', '', '', function(opts) {\n  this.mixin('controlMixin')\n  this._posts = []\n\n  this.on('mount', () => {\n    riot.control.trigger(riot.VE.LOAD_POSTS)\n  })\n\n  this.onControl(riot.SE.POSTS_CHANGED, posts => {\n    this._posts = posts\n    this.update()\n  })\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/view/posts-view.html\n **/","/* global riot */\nconst _RiotControlApi = ['on', 'one', 'off', 'trigger']\nconst RiotControl = {\n  _stores: [],\n  addStore(store) {\n    this._stores.push(store)\n  },\n}\n_RiotControlApi.forEach(api => {\n  RiotControl[api] = function apiHandler(...args) {\n    this._stores.forEach(el => el[api].apply(null, args))\n  }\n})\n\n// since riot is auto loaded by ProvidePlugin, merge the control into the riot object\nriot.control = RiotControl\n// store events\nriot.SE = {\n  POSTS_CHANGED: 'se_posts_changed',\n}\n// view events\nriot.VE = {\n  RESET_DATA: 've_reset_data',\n  LOAD_POSTS: 've_load_posts',\n}\n\n// register global tag mixin for using RiotControl\nriot.mixin('controlMixin', {\n  onControl(signal, func) {\n    riot.control.on(signal, func)\n    this.on('unmount', () => riot.control.off(signal, func))\n  },\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/RiotControl.js\n **/","import './component/postcell.html'\nimport './component/rawhtml.html'\n\nimport './view/posts-view.html'\nimport './view/categories-view.html'\nimport './view/detail-view.html'\n\nimport './app.html'\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/riotTags.js\n **/","class Stackable {\n  constructor(token) {\n    this._token = token;\n    this._apiVersion = 'v1';\n    this._apiUrl = 'https://api.stackable.space';\n  }\n\n  getContainerItems(containerId, callback) {\n    this._get(`containers/${containerId}/items`, function(err, res) {\n      callback(err, res);\n    });\n  }\n\n  _get(path, callback) {\n    let endPoint = `${this._apiUrl}/${this._apiVersion}/${path}?token=${this._token}`;\n\n    $.ajax({\n        url: endPoint,\n        type: 'GET',\n        context: document.body,\n        success: function(response) {\n          callback(false, response);\n        },\n        error: function(err) {\n          callback(err, false);\n        }\n      });\n  }\n}\nexport default Stackable;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/stackable.js\n **/","import Stackable from '../stackable.js'\n\nclass BlogStore {\n  constructor() {\n    riot.observable(this)\n\n    this.stackable = new Stackable(STACK_ID);\n\n    //this.initData()\n    //todo use local storage later on\n    const json = window.localStorage.getItem(LOCALSTORAGE_KEY)\n    if (!json) {\n      this.initData()\n    } else {\n      this._posts = (json && JSON.parse(json)) || []\n    }\n  }\n\n  getPostById(id) {\n    return this._posts.filter(post => post._id === id)[0]\n  }\n\n  initData() {\n    this.stackable.getContainerItems(CONTAINER_ID, (err, res) => {\n      //console.log('stackable data', res);\n      this._posts = res.data\n      this.saveToStorage()\n      this.trigger(riot.SE.POSTS_CHANGED, this._posts)\n    });\n  }\n\n  saveToStorage() {\n    window.localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(this._posts))\n  }\n}\n\nconst instance = new BlogStore()\n\ninstance.on(riot.VE.LOAD_POSTS, () => {\n  instance.trigger(riot.SE.POSTS_CHANGED, instance._posts)\n})\n\ninstance.on(riot.VE.RESET_DATA, () => {\n  instance.initData()\n  instance.trigger(riot.SE.POSTS_CHANGED, instance._posts)\n})\n\n// register to riot control by myself\nriot.control.addStore(instance)\nexport default instance\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/blogstore.js\n **/"],"sourceRoot":""}